# å›½é™…åŒ–æ–¹æ¡ˆè°ƒç ”

## åè¯é‡Šä¹‰

### i18n

i18nï¼ˆå…¶æ¥æºæ˜¯è‹±æ–‡å•è¯ internationalizationçš„é¦–æœ«å­—ç¬¦iå’Œnï¼Œ18ä¸ºä¸­é—´çš„å­—ç¬¦æ•°ï¼‰æ˜¯â€œå›½é™…åŒ–â€çš„ç®€ç§°ã€‚

æ¶µç›–èŒƒå›´ï¼š

**è¯­è¨€**

- [ç”µå­æ–‡ä»¶](https://baike.baidu.com/item/ç”µå­æ–‡ä»¶?fromModule=lemma_inlink)

- å­—æ¯ã€‚ç›®å‰å¤§éƒ¨åˆ†çš„ç³»ç»Ÿéƒ½é‡‡ç”¨ç»Ÿä¸€ç ä¸ºæ ‡å‡†æ¥è§£å†³[å­—ç¬¦ç¼–ç ](https://baike.baidu.com/item/å­—ç¬¦ç¼–ç ?fromModule=lemma_inlink)ã€‚
- ä¸åŒçš„æ•°å­—å‘½åç³»ç»Ÿã€‚
- ä¹¦å†™æ–¹å‘ã€‚è­¬å¦‚å¾·è¯­æ˜¯ä»å·¦åˆ°å³ï¼Œè€Œæ³¢æ–¯è¯­ã€å¸Œä¼¯æ¥è¯­å’Œé˜¿æ‹‰ä¼¯è¯­æ˜¯ç”±å³åˆ°å·¦ã€‚
- ç›¸åŒè¯­è¨€åœ¨ä¸åŒåœ°åŒºçš„æ‹¼æ³•å·®å¼‚ï¼Œå¦‚ç¾å›½è‹±è¯­ã€åŠ æ‹¿å¤§è‹±è¯­ä½¿ç”¨localizationï¼Œè€Œè‹±å›½è‹±è¯­å’Œæ¾³å¤§åˆ©äºšè‹±è¯­ä½¿ç”¨localisationã€‚
- æ–‡ä»¶å¤„ç†ä¸Šçš„å·®å¼‚ï¼Œå¦‚æŸäº›æ–‡å­—å­˜åœ¨å¤§å°å†™ï¼Œå…¶å®ƒåˆ™å¦ã€‚å­—æ¯é¡ºåºã€‚

- æ–‡å­—çš„å›¾åƒè¡¨ç¤ºï¼ˆåˆ—å°ç‰©ã€å†…å«çº¿ä¸Šå›¾ç‰‡ï¼‰ã€‚
- è¯»æ³•ï¼ˆéŸ³é¢‘ï¼‰
- è§†é¢‘çš„å­—å¹•

**æ–‡åŒ–**

- å›¾ç‰‡å’Œé¢œè‰²ï¼šè¿™ç‰µæ¶‰åˆ°ç†è§£å’Œæ–‡åŒ–é€‚å®œçš„è®®é¢˜ã€‚
- åå­—å’Œç§°è°“
- æ”¿åºœç»™å®šçš„ç¼–ç ï¼ˆå¦‚ç¾å›½çš„ç¤¾ä¼šå®‰å…¨ç ï¼Œè‹±å›½çš„National Insurance numberï¼Œçˆ±æ²™å°¼äºšçš„IsikukoodåŠå…¶å®ƒå„å›½çš„èº«ä»½è¯å·ç ï¼‰å’ŒæŠ¤ç…§
- ç”µè¯å·ç ã€åœ°å€å’Œå›½é™…é‚®é€’åŒºå·
- è´§å¸ ï¼ˆç¬¦å·ã€è´§å¸æ ‡å¿—çš„ä½ç½®ï¼‰
- åº¦é‡è¡¡
- çº¸å¼ å¤§å°

**ä¹¦å†™ä¹ æƒ¯**

- æ—¥æœŸè·Ÿæ—¶é—´çš„æ ¼å¼ï¼ŒåŒ…å«å„å¼æ—¥å†ã€‚
- æ—¶åŒºï¼ˆåœ¨å›½é™…åœºåˆä¼šä½¿ç”¨ä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼‰
- æ•°å­—æ ¼å¼ï¼ˆå°æ•°ç‚¹ã€åˆ†éš”ç‚¹çš„ä½ç½®ã€åˆ†éš”æ‰€ç”¨çš„[å­—ç¬¦](https://baike.baidu.com/item/å­—ç¬¦?fromModule=lemma_inlink)ï¼‰



é™¤äº†i18nï¼ŒL10nï¼ˆlocalizationï¼‰ï¼Œg11nï¼ˆglobalizationï¼‰ï¼Œè¿˜æœ‰m17nï¼ˆmultilingualizationï¼‰ï¼ŒåŒºåˆ«æ˜¯ï¼š

**i18n**æ”¯æŒå¤šç§è¯­è¨€ï¼Œä½†æ˜¯åŒä¸€æ—¶é—´åªèƒ½æ˜¯è‹±æ–‡å’Œä¸€ç§é€‰å®šçš„è¯­è¨€ï¼Œä¾‹å¦‚è‹±æ–‡+ä¸­æ–‡ã€è‹±æ–‡+å¾·æ–‡ã€è‹±æ–‡+éŸ©æ–‡ç­‰ç­‰ï¼›

**L10n**ï¼ˆlocalizationï¼‰ï¼Œæ”¯æŒ2ç§è¯­è¨€ï¼Œè‹±æ–‡å’Œå¦å¤–ä¸€ç§è¯­è¨€ï¼ˆä¾‹å¦‚ä¸­æ–‡ï¼‰ï¼›

**g11n**ï¼ˆglobalizationï¼‰ï¼Œç®€å•çš„ç†è§£å¯ä»¥è®¤ä¸ºg11n = i18n + L10nã€‚

**m17n**ï¼ˆmultilingualizationï¼‰å¯ä»¥åœ¨åŒä¸€æ—¶é—´æ”¯æŒå¤šç§è¯­è¨€ï¼Œä¾‹å¦‚ä½ å¯ä»¥åœ¨ä¸€ä¸ªé¡µé¢é‡Œçœ‹åˆ°ä¸­æ–‡ã€è‹±æ–‡ã€å¾·æ–‡å’ŒéŸ©æ–‡ã€‚



### Unicode CLDR

Unicode Common Locale Data Repository (CLDR) ï¼ŒUnicode é€šç”¨è¯­è¨€ç¯å¢ƒæ•°æ®å­˜å‚¨åº“ã€‚

è¯¥é¡¹ç›®æä¾›ä¸€äº›å¸¸è§ä¿¡æ¯çš„æ ‡å‡†åŒ–ç¿»è¯‘ï¼Œç”±Unicode Consortiuméç›ˆåˆ©ç»„ç»‡æä¾›çš„XMLæ ¼å¼è¯­è¨€æ•°æ®ï¼Œä¸»è¦ç”¨äºæœºå™¨ä½¿ç”¨ï¼Œè®¡ç®—æœºæ“ä½œç³»ç»Ÿæ¶‰åŠåˆ°çš„å¾ˆå¤šä¿¡æ¯éƒ½åŒ…å«åœ¨å†…ã€‚

ä¸»è¦åŒ…æ‹¬ï¼š

- è¯­è¨€åç§°çš„ç¿»è¯‘
- é¢†åœŸå’Œå›½å®¶åç§°çš„ç¿»è¯‘
- è´§å¸åç§°çš„ç¿»è¯‘ï¼ŒåŒ…æ‹¬å•/å¤æ•°
- å®Œæ•´å’Œç¼©å†™å½¢å¼çš„å·¥ä½œæ—¥ã€æœˆä»½ã€æ—¶ä»£ã€æ—¶æ®µçš„ç¿»è¯‘
- æ—¶åŒºå’Œç¤ºä¾‹åŸå¸‚ï¼ˆæˆ–ç±»ä¼¼åŸå¸‚ï¼‰çš„æ—¶åŒºç¿»è¯‘
- æ—¥å†å­—æ®µçš„ç¿»è¯‘
- ç”¨äºæ ¼å¼åŒ–/è§£ææ—¥æœŸæˆ–ä¸€å¤©ä¸­çš„æ—¶é—´çš„æ¨¡å¼
- ç”¨äºç¼–å†™è¯­è¨€çš„ç¤ºä¾‹å­—ç¬¦é›†
- æ ¼å¼åŒ–/è§£ææ•°å­—çš„æ¨¡å¼
- é€‚åº”è¯­è¨€çš„æ’åºè§„åˆ™
- åœ¨ä¼ ç»Ÿæ•°å­—ç³»ç»Ÿä¸­æ ¼å¼åŒ–æ•°å­—çš„è§„åˆ™ï¼ˆä¾‹å¦‚ç½—é©¬æ•°å­—ã€äºšç¾å°¼äºšæ•°å­— â€¦ï¼‰
- å°†æ•°å­—æ‹¼å†™ä¸ºå•è¯çš„è§„åˆ™
- è„šæœ¬ä¹‹é—´éŸ³è¯‘çš„è§„åˆ™ï¼Œå…¶ä¸­å¾ˆå¤šæ˜¯åŸºäºBGN / PCGNç½—é©¬åŒ–çš„

```
å­— - returns ['zh', 'ja', 'ko'] 
Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© - returns ['ar']
a - returns ['en', 'fr', 'de'] //and many more
Ğ¹ - returns ['ru', 'be', 'bg', 'uk']
```

å‚è€ƒæ–‡æ¡£ï¼šhttps://cldr.unicode.org/index



### ICU Message syntax

International Component for Unicode ç®€ç§° ICUï¼Œ æ˜¯ IBM ä¸å¼€æºç»„ç»‡åˆä½œç ”ç©¶ï¼ŒåŸºäº "IBM å…¬å…±è®¸å¯è¯" çš„ç”¨äºæ”¯æŒè½¯ä»¶å›½é™…åŒ–çš„å¼€æºé¡¹ç›®ã€‚ ICU å®ç°äº†å¯¹æ•°å­—ã€æ—¥æœŸã€è´§å¸ç­‰æä¾›å›½é™…åŒ–æ”¯æŒã€‚

**å‚æ•°æ›¿æ¢**

{key, type, format}

```
I have {numCats, number} cats.
```

**æ¡ä»¶åˆ¤æ–­**

{key, select, matches}

```
{gender, select,
	male {He}
	female {She}
	other {Then}
} will respond shortly.
```

**å¤æ•°æ ¼å¼**

{key, plural, matches}

```
Cart: {itemCount} {itemCount, plural,
    one {item}
    other {items}
}
You have {itemCount, plural,
    =0 {no items}
    one {1 item}
    other {{itemCount} items}
```

ä½¿ç”¨ # æ ¼å¼åŒ–

```
You have {itemCount, plural,
    =0 {no items}
    one {# item}
    other {# items}
}.
```

**å¯Œæ–‡æœ¬**

```
Our price is <boldThis>{price, number, ::currency/USD precision-integer}</boldThis>
```

**è½¬ä¹‰**

```
"This is not an interpolation: '{word}"
â†’ "This is not an interpolation: {word}"

"'<notATag>"
â†’ "<notATag>"
```



å‚è€ƒæ–‡æ¡£ï¼šhttps://unicode-org.github.io/icu/userguide/format_parse/messages/



### ECMA-402

ECMAScript Internationalization APIï¼Œè¯¥æ ‡å‡†å®šä¹‰äº† ECMAScript å¯¹è±¡çš„åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼Œè¿™äº›å¯¹è±¡æ”¯æŒéœ€è¦é€‚åº”ä¸åŒäººç±»è¯­è¨€å’Œå›½å®¶æ‰€ä½¿ç”¨çš„è¯­è¨€å’Œæ–‡åŒ–çº¦å®šçš„ç¨‹åºã€‚

å‚è€ƒæ–‡æ¡£ï¼šhttps://www.ecma-international.org/publications-and-standards/standards/ecma-402/

## 1. èƒŒæ™¯

### 1.1 DM Hub 2.7 åŠä¹‹å‰å›½é™…åŒ–æ–¹æ¡ˆ

DM Hub åœ¨ 2.7 åŠä¹‹å‰çš„å›½é™…åŒ–ä¸»è¦å½¢å¼æ˜¯ä¸€ä¸ªæºæ–‡ä»¶å¯¹åº”ä¸€ä¸ªè¯­è¨€ç¿»è¯‘ JSON æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ Babel + Webpack æ‰“åŒ…å¤„ç†ï¼Œå°†ç¿»è¯‘å†…å®¹æ³¨å…¥åˆ°æ‰“åŒ…åçš„ä»£ç ä¸­ï¼Œæœ€ååœ¨è¿è¡Œæ—¶è·å– LocalStorage ä¸­çš„è¯­è¨€ç¯å¢ƒï¼Œå±•ç¤ºå¯¹åº”çš„è¯­è¨€æ–‡æœ¬ã€‚

![2.7-i18n](./images/2.7-i18n.png)

è¯¥æ–¹æ¡ˆæœ‰ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„ä¼˜åŠ¿ï¼Œå°±æ˜¯å¯¹æºä»£ç æ— ä¾µå…¥ï¼Œç¿»è¯‘æ–‡ä»¶å’Œæºç å®Œå…¨éš”ç¦»ï¼Œä»…åœ¨æ‰“åŒ…æ—¶æ‰ä¼šå°†ç¿»è¯‘æ–‡ä»¶æ³¨å…¥è¿›å»ã€‚

åŒæ—¶ä¹Ÿæœ‰ä»¥ä¸‹ç¼ºç‚¹ï¼š

- æ–¹æ¡ˆæºç åç»­ç»´æŠ¤å›°éš¾

  å›½é™…åŒ–æ–¹æ¡ˆä»£ç ç”±ä¸ªäººå¼€å‘ï¼Œè¯¥æ–¹æ¡ˆäº¤ç»™åç»­å¼€å‘äººå‘˜éœ€è¦èŠ±è¾ƒå¤šæ—¶é—´ç†Ÿæ‚‰è¯¥æ–¹æ¡ˆé€»è¾‘ï¼Œç»´æŠ¤æˆæœ¬å¾ˆé«˜ã€‚

- ç¿»è¯‘æ–‡ä»¶ç»´æŠ¤æˆæœ¬é«˜

  æ¯å½“åœ¨æºç æ–‡ä»¶ä¸­æ·»åŠ ä¸€æ®µæ–‡å­—ï¼Œéƒ½éœ€è¦å¯¹åº”çš„ç”Ÿæˆä¸€ä»½ç¿»è¯‘çš„å†…å®¹ï¼Œè¿™æ ·ä¹Ÿå¯èƒ½ä¼šäº§ç”Ÿå¾ˆå¤šæ¼ç¿»çš„æ–‡å­—ã€‚

- æ‹“å±•æ€§å·®

  å½“éœ€è¦æ–°å¢ä¸€ç§æ–°çš„è¯­è¨€ç¿»è¯‘ï¼Œï¼ˆæ¯”å¦‚ pseudoï¼‰ï¼Œå¯èƒ½æ„å‘³ç€å†å°†æ¯ä¸€æ–‡ä»¶å†ç”Ÿæˆä¸€ä»½å¯¹åº”çš„è¯­è¨€ç¿»è¯‘æ–‡ä»¶ï¼Œè¿™éƒ¨åˆ†çš„å·¥ä½œé‡æ¯”è¾ƒå¤§ï¼Œåç»­ç»´æŠ¤æˆæœ¬å¾ˆé«˜ã€‚

- ç¿»è¯‘ä¾›åº”å•†ä»‹å…¥å›°éš¾

  ç”±äºç”Ÿæˆçš„ç¿»è¯‘æ–‡ä»¶ï¼Œéæ ‡å‡†çš„å¯äº¤ä»˜ç»™ç¿»è¯‘ä¾›åº”å•†çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹æ— æ³•æä¾›è¯­å¢ƒä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”æ–‡ä»¶ç¹å¤šï¼Œä¹Ÿéœ€è¦ç»è¿‡ç‰¹æ®Šå¤„ç†ã€‚
  
- æ‰“åŒ…ä½“ç§¯å¤§

  è¯¥æ–¹æ¡ˆä¼šå°†æ‰€æœ‰çš„ç¿»è¯‘æ–‡ä»¶æ‰“åŒ…åˆ°ä»£ç ä¸­ï¼Œä¼šå¤§å¤§å¢åŠ æ‰“åŒ…ä½“ç§¯ã€‚

- ç¼ºå°‘æ—¶åŒºã€è´§å¸å•ä½ã€æ•°å­—æ ¼å¼ç­‰è§£å†³æ–¹æ¡ˆ



### 1.2 ä¸ºä½•é‡‡ç”¨ `react-intl` ä½œä¸ºå›½é™…åŒ–è§£å†³æ–¹æ¡ˆï¼Ÿ

- ä¸“ä¸šçš„å¼€æºå›¢é˜Ÿç»´æŠ¤ï¼Œä¸ ECMA-402ã€Unicode CLDRã€ICU Message syntax æ ‡å‡†ä¿æŒä¸€è‡´ï¼›
- åµŒå¥—ä½¿ç”¨ï¼Œå…¼å®¹åŒæ—¶å±•ç¤ºå¤šç§è¯­è¨€ï¼›
- ä¸°å¯Œçš„ç”Ÿæ€å·¥å…·ï¼Œå‘½ä»¤è¡Œå·¥å…·ã€ä¸€é”®æå–ã€è§„åˆ™æ ¡éªŒç­‰ï¼›
- æ”¯æŒç»„ä»¶å†…ã€å¤–ç¿»è¯‘å®šä¹‰ï¼›
- ç»´æŠ¤æˆæœ¬ä½ï¼Œæ‹“å±•æ€§å¼ºï¼Œå¹¶ä¸”å¯ä¸ºç¿»è¯‘äººå‘˜æä¾›å‹å¥½çš„ç¿»è¯‘æ ¼å¼æ–‡ä»¶ï¼›

## 2. äº§å“å›½é™…åŒ–ç°çŠ¶

DM Hub é‡‡ç”¨äº† `react-intl` å›½é™…åŒ–æ–¹æ¡ˆï¼Œä½†æ˜¯æœªèƒ½çœŸæ­£å‘æŒ¥å…¶æ ¸å¿ƒèƒ½åŠ›ï¼Œå¯¼è‡´ç°æœ‰çš„å¼€å‘æµç¨‹ç¹çï¼Œç»´æŠ¤æˆæœ¬å¢åŠ ã€å¼€å‘ä½“éªŒæ„Ÿå¾ˆå·®ã€‚

### 2.1 å¼€å‘ç¿»è¯‘æµç¨‹

1. å¼€å‘
2. é€šè¿‡ VSCode  æ’ä»¶è¯†åˆ«ä¸­æ–‡ï¼Œå¹¶æå– key
3. ç”Ÿæˆ i18n.tsã€en.tsã€zh.ts æ–‡ä»¶
4. å¯¼å‡º en.ts æ–‡ä»¶è¿›è¡Œç¿»è¯‘
5. è¦†ç›–äº§å“å†…çš„ en.ts æ–‡ä»¶ï¼Œå®Œæˆç¿»è¯‘

å½“æŸä¸ªæ–‡æœ¬æ”¹å˜ï¼Œæˆ–è€… key å˜åŒ–æ—¶ï¼š

1. ä¿®æ”¹ i18n.ts æ–‡ä»¶çš„ key æˆ– value
2. ä¿®æ”¹ en.tsã€zh.ts çš„ key æˆ– valueï¼ŒåŒæ—¶é‡æ–°ç¿»è¯‘
3. ä¿®æ”¹å¼•ç”¨å¤„çš„ key

### 2.2 æ–¹æ¡ˆç¼ºé™·

**ä»å¼€å‘æµç¨‹å’Œå¼€å‘ä½“éªŒçš„è§’åº¦ï¼Œè¯¥æ–¹æ¡ˆå­˜åœ¨ä»¥ä¸‹é—®é¢˜**ï¼š

#### 2.2.1 æ–‡æœ¬ä¸ä»£ç åˆ†ç¦»

æ–‡æœ¬ä¸ä»£ç åˆ†ç¦»æ˜¯å¼€å‘ä½“éªŒæ„Ÿæœ€å·®çš„ä¸€éƒ¨åˆ†ï¼Œè™½ç„¶æœ‰ VSCode æ’ä»¶çš„æç¤ºï¼Œä½†æ˜¯ä»é˜…è¯»ä»£ç çš„ä½“éªŒä¸Šæ¥çœ‹ï¼Œä»ç„¶ç›¸å·®å¾ˆå¤šã€‚è€Œé VSCode ç¼–è¾‘å™¨ï¼Œæ›´æ˜¯æ— æ³•ç›´è§‚çš„è·å–å…¶å…·ä½“ä¿¡æ¯ã€‚

åŒæ—¶å¯¹äºå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ£€ç´¢å…³é”®å­—æŸ¥æ‰¾ä»£ç æ‰€åœ¨å¤„ï¼Œä¹Ÿä¼šå¢åŠ å¾ˆå¤šç¯èŠ‚ï¼šé¦–å…ˆéœ€è¦å…ˆæ‰¾åˆ°æ–‡æœ¬å¯¹åº”çš„ keyï¼Œå†å»æŸ¥æ‰¾ key å¼•ç”¨çš„åœ°æ–¹ï¼Œå¦‚æœå­˜åœ¨å¤šå¤„å¼•ç”¨ï¼Œéœ€è¦è¿›ä¸€æ­¥çš„è¿›è¡Œåˆ¤æ–­å…·ä½“æ˜¯å“ªé‡Œä½¿ç”¨ï¼Œä»ä¸€å®šç¨‹åº¦ä¸Šä¹Ÿå¢åŠ äº†å¼€å‘æˆæœ¬ã€‚

```tsx
<Button type="primary" onClick={this.toggleCollapsed}>
  {translate(I18n.customer.components.list.CollapsibleBoard.collapsed)}
</Button>
```

#### 2.2.2 å¤æ‚çš„ key çš„æå–

å¯¹äº key çš„æå–æ˜¯å¢åŠ å¼€å‘å·¥ä½œé‡çš„ä¸»è¦ä¸€éƒ¨åˆ†ã€‚ç”±äºæ–‡æœ¬ä¸ä»£ç çš„éš”ç¦»ï¼Œæ‰€ä»¥è¯­ä¹‰åŒ–çš„ key å…·æœ‰ä¸€å®šçš„æ„ä¹‰ã€‚

ä½†æ˜¯è¯­ä¹‰åŒ– key çš„å®šä¹‰éœ€è¦å¼€å‘çš„æ€è€ƒå’Œåˆ¤æ–­ï¼Œå¹¶ä¸”è¦ä¿è¯ key å€¼çš„å”¯ä¸€æ€§ã€‚è™½ç„¶ key ä»å‘½åè§„åˆ™ä¸Šä¸€å®šç¨‹åº¦çš„å‡å°‘äº† key çš„é‡å¤ï¼Œä½†æ˜¯ä»ç„¶æ— æ³•ä¿è¯å…¶å”¯ä¸€æ€§ï¼Œå¹¶ä¸”åœ¨åŒä¸€æ–‡ä»¶ä¸­çš„å®šä¹‰å­˜åœ¨ç›¸åŒçš„ keyï¼Œä¹Ÿæ˜¯éœ€è¦è€ƒè™‘å®šä¹‰ä¸ºå…¶ä»–ä¸åŒçš„ keyã€‚

å¦å¤–å½“å‰ key çš„å‘½åè§„åˆ™é‡‡ç”¨çš„æ˜¯å¤šçº§ç›®å½•åç§° + æ–‡ä»¶å + key ç»„åˆçš„æ–¹å¼ï¼Œæ‰€ä»¥ä¹Ÿå¯¼è‡´çš„ key ç‰¹åˆ«çš„é•¿ï¼Œå¢åŠ äº†é˜…è¯»ä»£ç çš„å¤æ‚åº¦ã€‚

```json
{
  'customer.components.list.CollapsibleBoard.collapsed': 'æ”¶èµ·ä¾§æ '
}
```

#### 2.2.3 é‡å¤æ€§çš„ç¿»è¯‘æ–‡æœ¬

å¯¹äºå¤§å‹çš„é¡¹ç›®ï¼Œå°¤å…¶æ˜¯ monorepoï¼Œä¸€å®šæ„å‘³ç€ä¼šæœ‰å¾ˆå¤šé‡å¤æ€§çš„æ–‡æœ¬ã€‚è™½ç„¶å·²ç»æå–å‡ºæ¥äº†å¾ˆå¤šé‡å¤çš„å…¬å…±ç¿»è¯‘ï¼Œä½†æ˜¯ä»ç„¶é¿å…ä¸äº†ä¼šæœ‰é‡å¤ç¿»è¯‘çš„å‡ºç°ï¼Œå¹¶ä¸”åœ¨åç»­ä¼šè¶Šæ¥è¶Šå¤šã€‚

#### 2.2.4 ç¹ççš„ä¿®æ”¹æµç¨‹

å¦‚æœä¸€ä¸ª key ä¸å°å¿ƒæ‹¼å†™é”™è¯¯ï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹è‡³å°‘å››å¤„æ–‡ä»¶ï¼Œæ”¹åŠ¨ç‰¹åˆ«å¤æ‚ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“å‡ºé”™ï¼Œå¯¼è‡´ç¨‹åºæŠ¥é”™ã€‚

å¦‚æœä¸€ä¸ª value éœ€è¦è¿›è¡Œæ”¹åŠ¨ï¼Œä¹Ÿéœ€è¦ä¿®æ”¹è‡³å°‘ä¸‰å¤„æ–‡ä»¶ï¼Œå¹¶ä¸”éœ€è¦é‡æ–°ç¿»è¯‘ï¼Œæ”¹åŠ¨åŒæ ·å¾ˆå¤æ‚ã€‚

å¦å¤–è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äº key å’Œ value çš„ä¿®æ”¹ï¼Œè¿˜éœ€è¦è€ƒè™‘å…¶æ‰€æœ‰å¼•ç”¨çš„åœ°æ–¹æ˜¯å¦æœ‰å½±å“ï¼Œè¿™ä¸ªåŠ¨ä½œé£é™©å¾ˆå¤§ã€‚

#### 2.2.5 ç¼ºå°‘å¼ºåˆ¶ç¿»è¯‘æ ¡éªŒè§„åˆ™

å¼€å‘è¿‡ç¨‹ä¸­éš¾å…ä¼šæ¼ç¿»ï¼Œæµ‹è¯•æ›´ä¸å¯èƒ½è¦†ç›–åˆ°æ‰€æœ‰åœ°æ–¹éƒ½èƒ½ä¿è¯æ­£å¸¸çš„ç¿»è¯‘ã€‚VS Code æ’ä»¶è™½ç„¶æœ‰ç¿»è¯‘æç¤ºï¼Œä½†æ— æ³•åšåˆ°å¼ºåˆ¶æé†’

#### 2.2.6 æ’ä»¶ç»´æŠ¤æˆæœ¬é«˜ï¼Œæ— æ³•è·¨ç¼–è¾‘å™¨ä½¿ç”¨

VS Code æ’ä»¶è™½ç„¶ä¸€å®šç¨‹åº¦ä¸Šå¸®åŠ©å¼€å‘äººå‘˜å‡è½»äº†å·¥ä½œé‡ï¼Œä½†æ˜¯å¯¹äºé¡¹ç›®çš„æŒç»­é‡æ„ï¼Œæˆ–è€…è¯´ä½¿ç”¨å…¶ä»–çš„ç¼–è¾‘å™¨ï¼Œè¿™äº›åŠŸèƒ½å°±ä¼šå…¨éƒ¨å¤±æ•ˆã€‚ç„¶åå°±éœ€è¦è°ƒæ•´æ’ä»¶ï¼Œå¢åŠ äº†å¾ˆå¤šé¢å¤–çš„å·¥ä½œé‡ã€‚

#### 2.2.7 ç¼ºå°‘æ—¥æœŸã€æ•°å­—ç­‰å›½é™…åŒ–æ–¹æ¡ˆ

å›½é™…åŒ–ä¸ä»…æ„å‘³ç€å¯¹æ–‡æœ¬çš„ç¿»è¯‘ï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘åˆ°ä¸€å¼€å§‹æåˆ°çš„ i18n åç§°é‡Šä¹‰ä¸­çš„æ¶µç›–èŒƒå›´ï¼Œä¸ºæ ‡å‡†åŒ–çš„å›½é™…åŒ–æ–¹æ¡ˆæ‰“ä¸‹åŸºç¡€ã€‚

#### 2.2.8 MonoRepo å¼€å‘æ¨¡å¼ä¸å‹å¥½

å¯¹äº MonoRepo çš„é¡¹ç›®ï¼Œå­˜åœ¨ç€å¾ˆå¤šä¾èµ–åŒ…ï¼Œç”šè‡³äºå¾ˆå¤šçš„äº§å“åº”ç”¨ã€‚å¦‚æœæ¯ä¸€ä¸ªåœ°æ–¹éƒ½æœ‰ä¸€ä»½ i18n çš„é…ç½®ï¼Œæˆ–è€…è¯´ç¿»è¯‘æ–‡ä»¶ï¼Œä»£ç ä¼šæ˜¾å¾—ç‰¹åˆ«çš„å†—ä½™ï¼Œå¹¶ä¸”å¯¹å°†æ¥å¯èƒ½å‡ºç°çš„ä»£ç æ‹†åˆ†å¢åŠ é¢å¤–çš„å·¥ä½œé‡ã€‚

## 3. ä¼˜åŒ–æ–¹æ¡ˆ

### 3.1 ä¼˜åŒ–åæµç¨‹

ä¼˜åŒ–åçš„æµç¨‹ä¸­ï¼Œå¼€å‘ä»…éœ€å’Œä»¥å¾€ä¿æŒä¸€è‡´çš„å¼€å‘æµç¨‹å³å¯ï¼Œå…¶ä»–ç¯èŠ‚æ— éœ€å‚ä¸ï¼Œå¯å¤§å¤§å‡è½»å·¥ä½œé‡ã€‚

å¼€å‘ -> è§„åˆ™æ ¡éªŒ -> CI æå– -> ç¿»è¯‘

### 3.2 å…·ä½“å®æ–½

é’ˆå¯¹å½“å‰å›½é™…åŒ–æ–¹æ¡ˆçš„ç¼ºé™·ï¼Œä¸‹é¢å°†ä¸€ä¸€çš„è¿›è¡Œä¼˜åŒ–

#### 3.2.1 å†…è”æ–‡æœ¬

å†…è”æ–‡æœ¬è¡¨ç¤ºä»£ç å’Œæ–‡æœ¬å†™åœ¨ä¸€èµ·ï¼Œè¿™æ ·å¯ä»¥è®©ä»£ç çš„é€»è¾‘å˜å¾—æ›´åŠ çš„æ¸…æ™°ï¼Œæ›´æ˜“è¯»æ‡‚ä»£ç ï¼Œä¹Ÿå¤§å¤§æå‡äº†å¼€å‘ä½“éªŒã€‚

**ç»„ä»¶å†…ï¼š**

```diff
- import { I18n, translate } from 'i18n';
+ import { FormattedMessage } from 'react-intl';

- <Button type="primary" onClick={this.toggleCollapsed}>
-   {translate(I18n.customer.components.list.CollapsibleBoard.collapsed)}
- </Button>

+ <Button type="primary" onClick={this.toggleCollapsed}>
+   <FormattedMessage defaultMessage="æ”¶èµ·ä¾§è¾¹æ " />
+ </Button>
```

**ç»„ä»¶å¤–ï¼š**

```diff
- import { I18n, translate } from 'i18n';
+ import { defineMessage } from 'react-intl';

- const button = translate(I18n.customer.components.list.CollapsibleBoard.collapsed);
+ const button = defineMessage({ defaultMessage: 'é¢„å®šä¹‰' });
```

#### 3.2.2 çœç•¥ key çš„å®šä¹‰ä¸æå–

å®‰è£… `babel-plugin-formatjs`ï¼Œä¿®æ”¹ babel é…ç½®ï¼š

```diff
{
  "presets": ["@babel/preset-env", "@babel/preset-react", "@babel/preset-typescript"],
+   "plugins": [
+    [
+      "formatjs",
+      {
+        "idInterpolationPattern": "[sha512:contenthash:base64:6]",
+        "ast": true
+      }
+    ]
+  ]
}
```

é€šè¿‡ Babel æ’ä»¶çš„è½¬æ¢ï¼Œå¯ä»¥å®ç°å¼€å‘ä¸­æ— éœ€è¿›è¡Œ key çš„å®šä¹‰ï¼Œè¿è¡Œä¸­è‡ªåŠ¨è¡¥å…… keyã€‚

åŒæ—¶å¯¹äº key çš„ç”Ÿæˆå¯ä»¥å®ç°è‡ªå®šä¹‰é…ç½®ï¼Œä¸€èˆ¬é‡‡ç”¨ sha512 å“ˆå¸Œç®—æ³•ç”Ÿæˆï¼Œä¿è¯äº† key çš„å”¯ä¸€æ€§ã€‚

#### 3.2.3 ç¿»è¯‘çš„å”¯ä¸€æ€§

é€šè¿‡ `sha512` å“ˆå¸Œç®—æ³•ï¼Œæ—¢å¯ä»¥ä¿è¯ key çš„å”¯ä¸€æ€§ï¼ŒåŒæ—¶ä¹Ÿä¿è¯äº†ç›¸åŒçš„æ–‡æœ¬å¿…å®šä¼šäº§ç”Ÿç›¸åŒçš„åŠ å¯†å­—ç¬¦ä¸²ï¼Œè¿™æ ·ä¹Ÿå°±æ„å‘³ç€æ— è®ºåœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹å®šä¹‰çš„é—®é¢˜ï¼Œå…¶æœ€ç»ˆå¯¹åº”çš„ç¿»è¯‘çš„ keyï¼Œä¸€å®šéƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå°±ä¿è¯äº†ä¸ä¼šå‡ºç°å¤šä½™çš„é‡å¤çš„ç¿»è¯‘ã€‚

![common-key](./images/common-key.png)

#### 3.2.4 å¼€å‘å³ç¿»è¯‘

åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œåœ¨æ‰€æœ‰ç¿»è¯‘çš„åœ°æ–¹éƒ½ä½¿ç”¨ `react-intl` è¿›è¡ŒåŒ…è£…ï¼Œå³æ–‡æœ¬å¤šäº†ä¸€å±‚ç»„ä»¶åŒ…è£¹ï¼Œåœ¨åç»­çš„æµç¨‹ä¸­ï¼Œå¼€å‘éƒ½æ— éœ€å‚ä¸ï¼Œä¹Ÿå°±æ„å‘³ç€å¼€å‘çš„å®Œæˆï¼Œä¹Ÿå°±æ˜¯ç¿»è¯‘çš„å®Œæˆã€‚

å¦å¤– key å…¨éƒ¨äº¤ç»™ Babel è¿›è¡Œå¤„ç†ï¼Œä¹Ÿå°±ä¸å­˜åœ¨ key çš„ä¿®æ”¹ã€‚è€Œæ–‡æœ¬çš„ä¿®æ”¹ä¹Ÿæ˜¯ç›´æ¥å¯¹ä»£ç å¤„è¿›è¡Œè°ƒæ•´å³å¯ï¼ŒBabel ä¼šè‡ªåŠ¨ç”Ÿæˆæ–°çš„ keyï¼Œä¸ä»¥å¾€çš„å¼€å‘æµç¨‹æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚

#### 3.2.6 Eslint è§„åˆ™æ ¡éªŒ

å®‰è£… `eslint-plugin-formatjs`ï¼Œä¿®æ”¹ Eslint é…ç½®ï¼š

```diff
- "plugins": ["react", "@typescript-eslint"],
- "rules": {}

+ "plugins": ["react", "@typescript-eslint", "formatjs"],
+ "rules": {
+		"formatjs/enforce-default-message": ["error", "literal"],
+   "formatjs/enforce-placeholders": ["error"],
+   "formatjs/no-offset": "error",
+   "formatjs/no-literal-string-in-jsx": [
+     "error",
+     {
+       "props": {
+         "include": [["*", "message"]]
+       }
+     }
+   ]
+ }
```

é€šè¿‡è¯¥è§„åˆ™ä¸€æ˜¯å¯ä»¥æç¤ºåˆ°å¼€å‘å“ªé‡Œéœ€è¦è¿›è¡Œç¿»è¯‘ï¼Œå¦å¤–å¯ä»¥é…åˆ husky å®ç°å¼ºåˆ¶æ ¡éªŒï¼Œä¸ç¿»è¯‘ä¸å…è®¸æäº¤ä»£ç ã€‚

#### 3.2.7 å†…ç½® CLIï¼Œé…åˆ CIï¼Œå®ç°é›¶æ’ä»¶ç»´æŠ¤

ç»“åˆä»¥ä¸Šçš„ç¿»è¯‘æµç¨‹ï¼Œå‡ ä¹ä¸å†éœ€è¦ VS Code æ’ä»¶çš„è¾…åŠ©ã€‚å¦å¤–é…ç½® CIï¼Œå®ç°è‡ªåŠ¨åŒ–çš„ key çš„æå–ã€‚

å®‰è£… `@formatjs/cli`ï¼Œå¢åŠ å¦‚ä¸‹å‘½ä»¤ï¼š

```json
{
  "scripts": {
    "extract": "formatjs extract 'src/**/*.ts*' --out-file lang/dev.json --format scripts/formatter.js",
    "compile": "formatjs compile lang/dev.json --out-file lang/zh-CN.json --format scripts/formatter.js",
    "compile:pseudo": "formatjs compile lang/dev.json --out-file lang/pseudo.json --format scripts/pseudo.js"
  }
}
```

#### 3.2.8 æ”¯æŒæ—¥æœŸã€æ•°å­—ç­‰å›½é™…åŒ–è§£å†³æ–¹æ¡ˆ

```tsx
import { FormattedDate, FormattedTime, FormattedNumber } from 'react-intl';

<FormattedNumber value={10000} />
<FormattedDate value={new Date()} />
<FormattedTime value={new Date()} />
```

### 3.3 ç¿»è¯‘æ–‡ä»¶çš„æ›¿æ¢æ–¹æ¡ˆ

#### 3.3.1 å·²ç¿»è¯‘æ–‡ä»¶

å› ä¸ºç°æœ‰çš„å·²ç¿»è¯‘æ–‡ä»¶ï¼Œç»Ÿä¸€éƒ½æ˜¯é€šè¿‡ `translate` å‡½æ•°è¿›è¡Œç¿»è¯‘ï¼Œæ‰€ä»¥å…·æœ‰ä¸€å®šçš„è§„åˆ™ï¼Œå¯ä»¥é€šè¿‡æ­£åˆ™åŒ¹é…çš„æ–¹å¼è¿›è¡Œç»Ÿä¸€çš„æ›¿æ¢ã€‚

#### 3.3.2 æœªç¿»è¯‘æ–‡ä»¶

ä½¿ç”¨ç¼–è¾‘å™¨çš„æ›¿æ¢åŠŸèƒ½ï¼Œè¿›è¡Œæ­£åˆ™åŒ¹é…æ›¿æ¢ã€‚

## 4. å…·ä½“è°ƒæ•´

### 4.1 åŸºæœ¬åŸåˆ™

- ç¿»è¯‘çš„æ–‡æœ¬ä¸€å®šæ˜¯éœ€è¦æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šçš„æ–‡å­—ï¼Œå¦‚æœä¸ä¼šæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦ç¿»è¯‘ï¼›

- æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šçš„æ–‡å­—ä¸€å®šæ˜¯è¢« React ç»„ä»¶ `render` çš„ï¼Œå¦‚æœä¸ä¼šè¢« React ç»„ä»¶ç”¨åˆ°ï¼Œé‚£ä¹ˆä¹Ÿä¸éœ€è¦ç¿»è¯‘ï¼›

- `defineMessage` å’Œ `FormattedMessage` åœ¨ç»„ä»¶å†…å¤–å‡å¯ä½¿ç”¨ï¼Œ`formatMessage` å‡½æ•°ä»…èƒ½åœ¨ç»„ä»¶å†…ä½¿ç”¨ï¼›

- æ•°å­—ã€æ—¥æœŸã€è´§å¸ç­‰ï¼ˆé™¤æ–‡æœ¬å¤–ï¼‰ï¼Œå®šä¹‰çš„åœ°æ–¹ä¸å¤„ç†ï¼Œæ¶ˆè´¹çš„åœ°æ–¹ä½¿ç”¨ `Formattedxxx` å¤„ç†ï¼›

- æ¶ˆè´¹æ–‡æœ¬çš„åœ°æ–¹å¦‚æœä»…æ”¯æŒ `string` ç±»å‹ï¼Œåœ¨ç»„ä»¶å¤–ä»…å¯ä½¿ç”¨ `defineMessage` å‡½æ•°ç¿»è¯‘æ–‡æœ¬ï¼Œç»„ä»¶å†…æ—¢å¯ä½¿ç”¨ `defineMessage` å®šä¹‰ï¼Œä¹Ÿå¯ç›´æ¥ä½¿ç”¨ `formatMessage` å‡½æ•°å®šä¹‰ï¼›

- æ¶ˆè´¹æ–‡æœ¬çš„åœ°æ–¹å¯æ”¯æŒ `jsx` ç±»å‹ï¼Œåœ¨ç»„ä»¶å†…å¤–æ—¢å¯ä½¿ç”¨ `defineMessage` å‡½æ•°ç¿»è¯‘ï¼Œä¹Ÿå¯ä½¿ç”¨ `FormattedMessage` ç›´æ¥ç¿»è¯‘ï¼›

- å¦‚æœæ˜¯ `FormattedMessage` æˆ– `formatMessage` å®šä¹‰å¥½çš„ï¼Œé‚£ä¹ˆæ¶ˆè´¹çš„åœ°æ–¹ç›´æ¥ä½¿ç”¨å³å¯ï¼›å¦‚æœæ˜¯è¢« `defineMessage` å®šä¹‰å¥½çš„ï¼Œ`FormattedMessage` å’Œ `formatMessage` å‡å¯æ¶ˆè´¹ï¼›

### 4.2 åŸºæœ¬ä½¿ç”¨

API å‚è€ƒæ–‡æ¡£ï¼šhttps://formatjs.io/docs/react-intl

#### 4.2.1 `FormattedMessage`ã€`FormattedDate` ç­‰ç»„ä»¶

è¿™äº›ç»„ä»¶å¯ä»¥ç›´æ¥ä» `react-intl` ä¸­å¯¼å…¥ï¼Œ**å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶å†…å‡å¯ä½¿ç”¨**ï¼›

æ¨èåœ¨å±•ç¤º `jsx` çš„åœ°æ–¹ä½¿ç”¨ã€‚

```jsx
import React, { Component } from 'react';
import { FormattedMessage } from 'react-intl'

const App1 = () => (
  <FormattedMessage defaultMessage="bar" />
)

class App2 extends Component {
  render() {
    return (
      <FormattedMessage defaultMessage="boo" />
    )
  }
}
```

#### 4.2.2 `formatMessage`ã€`formattedDate` ç­‰å‡½æ•°

è¿™äº›å‡½æ•°éœ€è¦ä» `intl` å¯¹è±¡ä¸­è·å–ï¼Œä»…å¯åœ¨ç»„ä»¶å†…ä½¿ç”¨ï¼Œå‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶å‡æœ‰å¯¹åº”çš„è·å–æ–¹å¼ï¼Œå…·ä½“è§ 4.2.3ã€‚

æ¨èåœ¨å±æ€§ä¸­ï¼Œå¦‚ `title`ã€`label`ã€`placeholder` ç­‰æ¥æ”¶ `string` çš„åœ°æ–¹ä½¿ç”¨ã€‚

```jsx
import React from 'react';
import { FormattedMessage } from 'react-intl';
import { Form, Select } from 'antd';

const App = () => (
  <Form>
    <Form.Item label={intl.formatMessage({ defaultMessage: 'çˆ±å¥½' })} name="hobby">
      <Select placeholder={intl.formatMessage({ defaultMessage: 'è¯·é€‰æ‹©çˆ±å¥½' })}>
        <Select.Option value="read">
          <FormattedMessage defaultMessage="é˜…è¯»" />
        </Select.Option>
        <Select.Option value="swimming">
          <FormattedMessage defaultMessage="æ¸¸æ³³" />
        </Select.Option>
      </Select>
    </Form.Item>
  </Form>
)
```

#### 4.2.3 `intl`ã€`useIntl`ã€`injectIntl` 

`intl` å¯¹è±¡å¯ä»¥è·å–åˆ° `formatMessage` ç­‰å‡½æ•°ï¼Œå…·ä½“è·å–æ–¹å¼å¦‚ä¸‹ï¼š

##### 4.2.3.1 ç›´æ¥å¯¼å…¥çš„æ–¹å¼

ä¸€èˆ¬ç”±ä½¿ç”¨ `IntlProvider` çš„åœ°æ–¹å®šä¹‰å¹¶å¯¼å‡ºï¼Œç»„ä»¶å¯ç›´æ¥å¯¼å…¥ä½¿ç”¨ï¼Œ**é€‚ç”¨äºå‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶**ã€‚

```jsx
import React, { Component } from 'react';
import { Input } from 'antd';
import { intl } from './index';

class App1 extends Component {
  render() {
    const { formatMessage } = intl;
    
    return (
      <Input placeholder={intl.formatMessage({ defaultMessage: 'è¯·è¾“å…¥ç”¨æˆ·å' })} />
    )
  }
}

const App2 = () => {
	return (
		<Input placeholder={intl.formatMessage({ defaultMessage: 'è¯·è¾“å…¥ç”¨æˆ·å' })} />
	);
}
```

##### 4.2.3.2 å°è£…é«˜é˜¶ç»„ä»¶

ä¸»è¦é€šè¿‡ `react-intl` æä¾›çš„é«˜é˜¶å‡½æ•° `injectIntl`ï¼Œå°†ç»„ä»¶å°è£…ä¸ºé«˜é˜¶ç»„ä»¶ï¼Œç„¶åä» `props` ä¸­è·å–åˆ° `intl` å¯¹è±¡ï¼Œ**é€‚ç”¨äºå‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶ï¼Œä½†æ˜¯ä¸æ¨èåœ¨å‡½æ•°ç»„ä»¶ä½¿ç”¨ï¼Œå‡½æ•°ç»„ä»¶æ¨èä½¿ç”¨ hooksï¼›**

```jsx
import React, { Component } from 'react';
import { FormattedMessage, injectIntl } from 'react-intl';
import { Input, Form, Select } from 'antd';

class ClassCompment extends Component {
  render() {
    const { intl } = this.props;

    return (
      <div>
        <Form labelCol={{ span: 6 }} wrapperCol={{ span: 18 }}>
          <Form.Item label={intl.formatMessage({ defaultMessage: 'ç”¨æˆ·å' })} name="userName">
            <Input placeholder={intl.formatMessage({ defaultMessage: 'è¯·è¾“å…¥ç”¨æˆ·å' })} />
          </Form.Item>
          <Form.Item label={intl.formatMessage({ defaultMessage: 'çˆ±å¥½' })} name="hobby">
            <Select placeholder={intl.formatMessage({ defaultMessage: 'è¯·é€‰æ‹©çˆ±å¥½' })}>
              <Select.Option value="read">
                <FormattedMessage defaultMessage="é˜…è¯»" />
              </Select.Option>
              <Select.Option value="swimming">
                <FormattedMessage defaultMessage="æ¸¸æ³³" />
              </Select.Option>
            </Select>
          </Form.Item>
        </Form>
      </div>
    );
  }
}

export default injectIntl(ClassCompment);
```

##### 4.2.3.3 hooks è·å–

é€šè¿‡ `react-intl` æä¾›çš„ hooks `useIntl` è·å–ï¼Œ**ä»…é€‚ç”¨äºå‡½æ•°ç»„ä»¶**ã€‚

```jsx
import React from 'react';
import { FormattedMessage, useIntl } from 'react-intl';
import { Input, Form, Select } from 'antd';

const FunctionComponent = () => {
  const intl = useIntl();

  return (
    <Form labelCol={{ span: 6 }} wrapperCol={{ span: 18 }}>
      <Form.Item label={intl.formatMessage({ defaultMessage: 'ç”¨æˆ·å' })} name="userName">
        <Input placeholder={intl.formatMessage({ defaultMessage: 'è¯·è¾“å…¥ç”¨æˆ·å' })} />
      </Form.Item>
      <Form.Item label={intl.formatMessage({ defaultMessage: 'çˆ±å¥½' })} name="hobby">
        <Select placeholder={intl.formatMessage({ defaultMessage: 'è¯·é€‰æ‹©çˆ±å¥½' })}>
          <Select.Option value="read">
            <FormattedMessage defaultMessage="é˜…è¯»" />
          </Select.Option>
          <Select.Option value="swimming">
            <FormattedMessage defaultMessage="æ¸¸æ³³" />
          </Select.Option>
        </Select>
      </Form.Item>
    </Form>
  );
};

export default FunctionComponent;
```



#### 4.2.4 `defineMessage`ã€`defineMessages`

ç»„ä»¶å¤–çš„ç¿»è¯‘ï¼Œå®˜æ–¹æ¨èä½¿ç”¨ `defineMessage`ã€`defineMessages` åœ¨ç»„ä»¶å¤–å®šä¹‰åŒ…è£¹å¥½æ–‡æœ¬ï¼Œç„¶ååœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ `FormattedMessage` æˆ– `formatMessage` ä½¿ç”¨ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨ `FormattedMessage` ç›´æ¥ç¿»è¯‘å¥½ï¼Œå†åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ï¼ˆä½†æ˜¯éœ€è¦æ³¨æ„ä½¿ç”¨çš„åœ°æ–¹æ˜¯å¦æ”¯æŒä¼ é€’ç»„ä»¶ï¼‰ã€‚

```jsx
import React from 'react';
import {
  defineMessage,
  defineMessages,
  FormattedMessage,
  FormattedDate,
  FormattedTime,
  FormattedNumber,
  FormattedList,
  FormattedPlural,
  useIntl,
  injectIntl,
} from 'react-intl';
import { intl } from './index';

// const fruits = defineMessages({
//   apple: {
//     value: 'apple',
//     defaultMessage: 'è‹¹æœ'
//   },
//   banana: {
//     value: 'banana',
//     defaultMessage: 'é¦™è•‰'
//   }
// });

const fruits = [
  {
    value: 'apple',
    label: defineMessage({ defaultMessage: 'è‹¹æœ' }),
  },
  {
    value: 'banana',
    label: defineMessage({ defaultMessage: 'é¦™è•‰' }),
  },
];

const number = 1234567890;

const messages = defineMessages({
  greeting: {
    defaultMessage: 'Hello, {name}!',
  },
});

const outFCMessage = <FormattedMessage defaultMessage="ç»„ä»¶å¤–çš„ FormattedMessage" />;

const outMessage = defineMessage({ defaultMessage: 'ç»„ä»¶å¤–ä½¿ç”¨ defineMessage å®šä¹‰çš„' });

const SummarySamples = props => {
  const intl = useIntl();
  const innerMessage = intl.formatMessage({ defaultMessage: 'ç»„ä»¶å†…ä½¿ç”¨ defineMessage å®šä¹‰çš„' });

  return (
    <div>
      <p>{outFCMessage}</p>
      <FormattedMessage tagName="p" {...outMessage} />
      {props.intl.formatMessage(outMessage)}
      {intl.formatMessage(outMessage)}
      <FormattedNumber value={number} />
      <h1>{intl.formatMessage({ defaultMessage: 'ä½ å¥½å•Š' })}</h1>
      <select>
        {fruits.map(fruit => (
          <option key={fruit.value} value={fruit.value}>
            {intl.formatMessage(fruit.label)}
          </option>
        ))}
      </select>
      <p>{innerMessage}</p>
      <p>
        <FormattedMessage defaultMessage="ğŸ˜€è¿™æ˜¯ä¸€æ®µä¸åº”è¯¥ä½¿ç”¨ Emoji çš„æ–‡å­—" />
      </p>
      <FormattedMessage tagName="p" defaultMessage="è¿™æ˜¯ä¸€æ®µæ–‡å­—" description="fsd" />
      <p>è¿™æ˜¯ä¸€æ®µæœªè¢«ç¿»è¯‘çš„æ–‡å­—</p>
    </div>
  );
};

export default injectIntl(SummarySamples);

```

### 4.3 æ³¨æ„äº‹é¡¹

- `FormattedMessage` ç­‰ç»„ä»¶è¿”å›çš„æ˜¯ä¸€ä¸ª**ç»„ä»¶**ï¼Œç»„ä»¶å†…å¤–å‡å¯ç”¨äºç¿»è¯‘æ–‡æœ¬ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„å…·ä½“å…·ä½“ä½¿ç”¨çš„åœ°æ–¹æ˜¯å¦æ”¯æŒæ¥æ”¶ç»„ä»¶ç±»å‹ï¼›
- `formatMessage` ç­‰å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª**å­—ç¬¦ä¸²**ï¼Œä¸€èˆ¬é€‚ç”¨äºæ¥æ”¶å­—ç¬¦ä¸²çš„åœ°æ–¹ï¼Œæ¯”å¦‚æŸäº›ç»„ä»¶çš„å±æ€§ï¼›éœ€è¦ä» `intl` å¯¹è±¡ä¸­è·å–ï¼Œä»…å¯åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ï¼›
- `defineMessage` ç­‰å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª**å¯¹è±¡**ï¼Œä½¿ç”¨è¯¥å‡½æ•°å®šä¹‰çš„å˜é‡ï¼Œå¿…é¡»å†ä½¿ç”¨ `FormattedMessage æˆ– formatMessage` æ¶ˆè´¹ï¼Œç»„ä»¶å†…å¤–å‡å¯ä½¿ç”¨ï¼›
- ç»„ä»¶ä¹‹å¤–éœ€è¦ç¿»è¯‘çš„æ–‡æœ¬ï¼Œä¸€å®šè¦ä½¿ç”¨ `FormattedMessage` æˆ– `defineMessage` å®šä¹‰ï¼Œç„¶åå†åœ¨ç»„ä»¶å†…ä½¿ç”¨ï¼›

## 5. å­˜åœ¨é—®é¢˜

## 6. åç»­ä¼˜åŒ–

- æ”¯æŒå¤šç§è¯­è¨€çš„åˆ‡æ¢
- åˆ‡æ¢è¯­è¨€è¿›è¡ŒåŠ¨æ€æ›¿æ¢ï¼Œä¸åˆ·æ–°é¡µé¢
- é»˜è®¤ä½¿ç”¨ navigator.languageï¼Œè·Ÿéšæµè§ˆå™¨è¯­è¨€ç¯å¢ƒ



å½“å‰æ”¯æŒçš„ç¿»è¯‘è¯­è¨€ï¼š**zh_CN**ã€**zh_TW**ã€**en_US**
