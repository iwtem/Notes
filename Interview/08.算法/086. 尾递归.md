## 尾递归

### 1. 尾调用

Tail Call 指的是一个函数的最后一条语句也是一个返回调用函数的语句，即return的是一个函数，这个函数可以是另一个函数，也可以是自身函数。

```javascript
function a(x) {
  return x - 1;
}

function b(x) {
  x++;
  return a(x);
}
```



### 2. 尾递归

函数在return的时候调用自身，这种情况称为尾递归，除了调用自身不能有其他额外的。尾递归是递归的一种特殊形式，也是是尾调用的一种特殊形式（尾调用最后调用函数自身，就是一个尾递归）。尾调用不一定是尾递归。

**尾递归特点：**

- 在回归过程中不用做任何操作，编译器会利用这种特点自动生成优化的代码。（编译器发现在回归调用时通过覆盖当前的栈，而不是创建新的栈，使用来减少栈空间的使用和减少栈的分配释放开销）

- 尾递归是把变化的参数传递给递归函数的变量了。递归发生时，外层函数把计算结果当成参数传给内存函数。

- 尾递归的优化从函数调用的汇编实现很容易理解，只要不涉及多余的参数（也就是不用额外的栈容量存，栈顶不用往下扩展再调用回函数），直接就可以改变%edi,%esi的值，重新调用函数，也就是说不用任何额外的赞变量。

```javascript
function a(x) {
  if(x === 1) {
    return x;
  }
  return a(x); // 最后返回调用的是自身函数，是尾递归
}
```

